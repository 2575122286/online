<!DOCTYPE html>
<html>
<head>
  <title>Loading...</title>
  <!-- Turnstile 隐形验证 -->
  <script src="https://challenges.cloudflare.com/turnstile/v0/api.js?onload=init" async defer></script>
  
  <!-- 行为检测脚本 -->
  <script>
    // 检测浏览器指纹（简化版）
    function getFingerprint() {
      const keys = [
        'userAgent', 'platform', 'hardwareConcurrency',
        'deviceMemory', 'screenResolution', 'timezone'
      ];
      return keys.map(k => navigator[k]).join('|');
    }

    // 行为分析（鼠标/点击/停留时间）
    let mouseMoves = 0;
    let startTime = Date.now();

    document.addEventListener('mousemove', () => mouseMoves++);

    // 初始化 Turnstile
    function init() {
      // 至少等待 2 秒收集行为数据
      setTimeout(() => {
        const isHuman = (
          mouseMoves > 2 && 
          (Date.now() - startTime) > 1500 &&
          getFingerprint().length > 10
        );

        if (isHuman) {
          turnstile.execute('#widget', {
            sitekey: '0x4AAAAAABQqGAPLf-8AjUZZ',
            callback: (token) => {
              // 通过验证后设置 Cookie 并刷新
              document.cookie = `cf_verified=1; max-age=86400; path=/; secure`;
              location.href = '/'; // 触发 _redirects 规则
            }
          });
        } else {
          location.href = 'https://brooklynindustries.com'; // 拦截机器人
        }
      }, 2000);
    }
  </script>
</head>
<body>
  <div id="widget" style="display:none;"></div> <!-- Turnstile 容器 -->
  
  <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
      <p>Loading resources, please wait...</p> <!-- 伪装内容 -->
  </div>
</body>
</html>
